# Module Federation

模块联合，pick webpack5.0功能，此项目基于 webpack 5.0.0-beta.22 版本


## 解决的问题

首先，单页面应用需要各个应用统一打包部署，当应用或合作的团队过多时，开发和部署就比较被动；再次，多入口的打包方式如果要做到各个应用间绝对独立，就必须不共用chunk或者小心的配置公共chunk,
不然其中的某个应用更新会导致公共chunk的变化，导致必须提交部署其他相关联的应用，无法充分利用缓存的问题。

Module Federation 功能解决了如下问题：

1. 各个应用间相互独立（不同于多入口应用，公共模块通过shared处理）

2. 一个应用的更新不会造成其他应用及平台的代码的任何改动（即contenthash改动），如此即可各应用独立提交部署

3. 应用可决定向外抛出组件，状态等，供其他应用调用

4. 各应用相同的chunk可共享，减少请求数量，提升体验



## 简介

此项目模拟了以下场景:

1. 各个应用有自己的路由控制，平台控制显示（权限管理等）

2. 各个应用间的状态共享（像单页面应用一样丝滑）

3. 应用间的组件共享，比如统一各个应用的Loading组件


## 使用

1. `yarn install`安装依赖

2. `npm install -g  @wannasky/server` 按需安装server，可自己配置http server或者使用nginx

3. `cd dist && wserver` 启动 


## 后期

webpack 5.0目前仍是beta版本，`Module Federation`功能很不稳定，而且存在bug。但是此功能值得等待，它可以让依赖共享，优先使用`Host`的依赖，发现不符合自身要求（比如版本）时，
自动降级使用`Remote`的依赖。整体来看它可以让你的多应用网站像单页面一样流畅。
